"use strict";

var _require = require('path'),
    resolve = _require.resolve;

var _require2 = require('fs-extra'),
    readJSONSync = _require2.readJSONSync;

var addFileToCompilation = require('../utils/addFileToCompilation');

module.exports = function (compilation, _ref) {
  var target = _ref.target,
      command = _ref.command,
      rootDir = _ref.rootDir;
  var pkgPath = resolve(process.cwd(), 'package.json');
  var pkgContent = readJSONSync(pkgPath, {
    encoding: 'utf-8'
  });
  addFileToCompilation(compilation, {
    filename: 'package.json',
    content: JSON.stringify({
      dependencies: pkgContent.dependencies
    }),
    command: command,
    target: target
  });
};