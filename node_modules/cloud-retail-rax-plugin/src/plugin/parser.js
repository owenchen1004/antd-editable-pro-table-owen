const htmlparser = require('htmlparser2');

module.exports = function (content) {
  return new Promise((resolve, reject) => {
    const handler = new htmlparser.DomHandler(function (error, ast) {
      if (error) {
        reject(error);
      } else {
        resolve(ast);
      }
    });
    const parser = new htmlparser.Parser(handler, {
      lowerCaseAttributeNames: false,
      lowerCaseTags: false,
      recognizeSelfClosing: true,
    });

    parser.write(content);
    parser.end();
  });
}
