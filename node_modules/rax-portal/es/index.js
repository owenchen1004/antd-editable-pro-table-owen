import { useEffect, useRef } from 'rax';
import createPortal from 'rax-create-portal';
import { isMiniApp, isWeb } from 'universal-env';

var Portal = function (props) {
  var children = props.children,
      _props$container = props.container,
      container = _props$container === void 0 ? document.body : _props$container;
  var el = useRef(document.createElement('div'));
  useEffect(function () {
    // no container, skip render
    if (!container) {
      return undefined;
    }

    if (isMiniApp || isWeb) {
      container.appendChild(el.current);
    } else {
      setTimeout(function () {
        return container.appendChild(el.current);
      });
    }

    return function () {
      container.removeChild(el.current);
    };
  }, []);
  return createPortal(children, el.current);
};

export default Portal;