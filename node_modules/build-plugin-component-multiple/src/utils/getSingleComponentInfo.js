/**
 * 获取单包模式组件的信息
 */
const path = require('path');
const fse = require('fs-extra');
const getDemos = require('./getDemos');
const getReadMe = require('./getReadMe');
const camelCase = require('camelcase');

module.exports = function (context) {
  const { rootDir, command, pkg } = context;
  const tmp = (pkg.name || '').split('/');
  const componentName = tmp[tmp.length - 1];
  const demos = getDemos(rootDir, componentName, null, false);
  const { meta, content: readmeContent } = getReadMe(rootDir, '', true);

  return [
    {
      componentName,
      multiple: false,
      componentPascalName: camelCase(componentName, { pascalCase: true }),
      title: meta.title || componentName,
      command,
      meta,
      readmeContent,
      demos,
      isSingle: true,
    },
  ];
};
