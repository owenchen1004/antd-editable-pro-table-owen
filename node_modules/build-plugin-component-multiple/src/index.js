module.exports = (api, options) => {
  const { context, log } = api;
  const { userConfig } = context;

  if (userConfig && userConfig.type === 'rax' && !Array.isArray(userConfig.targets)) {
    log.error('build-plugin-component-multiple: 需要指定 targets，如 targets:["web", "miniapp"]');
    process.exit(1);
  } else if (userConfig.type && !['rax', 'react'].includes(userConfig.type)) {
    log.error('build-plugin-component-multiple: 需要指定构建类型为 react 或 rax, 如 type: "react"');

    process.exit(1);
  } else {
    const componentType = userConfig.type || 'react';
    // eslint-disable-next-line
    require(`./${componentType}`)(api, options);
  }
};
