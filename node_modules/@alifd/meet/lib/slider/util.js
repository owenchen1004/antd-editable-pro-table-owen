"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.play = exports.pauseAll = exports.getContexts = exports.getMiniappVideoContext = exports.getWXVideoContext = void 0;

var utils_1 = require("../utils");

function getWXVideoContext(id) {
  if (typeof wx !== 'undefined') {
    var _internal = void 0;

    if (document && document.getElementById && document.getElementById(id)) {
      _internal = document.getElementById(id)._internal;
    }

    return wx.createVideoContext(id, _internal);
  }

  return null;
}

exports.getWXVideoContext = getWXVideoContext;

function getMiniappVideoContext(id) {
  if (typeof my !== 'undefined') {
    return my.createVideoContext(id);
  }

  return null;
}

exports.getMiniappVideoContext = getMiniappVideoContext;

function getContexts(refs, sliderPrefixId) {
  return refs.map(function (ref, index) {
    var id = sliderPrefixId + "-" + index;
    var node = ref;

    if (utils_1.isStrictMiniApp) {
      node = getMiniappVideoContext(id);
    } else if (utils_1.isStrictWechatMiniProgram) {
      node = getWXVideoContext(id);
    }

    return node;
  });
}

exports.getContexts = getContexts;

function pauseAll(contexts) {
  contexts.forEach(function (ctx) {
    if (ctx.pause) {
      ctx.pause();
    }
  });
}

exports.pauseAll = pauseAll;

function play(contexts, index) {
  if (contexts && contexts[index] && contexts[index].play) {
    contexts[index].play();
  }
}

exports.play = play;