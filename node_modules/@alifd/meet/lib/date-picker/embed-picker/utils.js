"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.resetTime = exports.resetMonth = exports.rangeMonthOptions = exports.rangeOptions = exports.withTime = void 0;

var tslib_1 = require("tslib");

var dayjs_1 = tslib_1.__importDefault(require("dayjs"));

var utils_1 = require("../../utils");

function withTime(format) {
  return /H{1,2}|h{1,2}|m{1,2}|s{1,2}|S{1,3}|Z{1,2}|A|a/.test(format);
}

exports.withTime = withTime;

function rangeOptions(min, max, suffix) {
  return utils_1.range(min, max + 1, 1).map(function (it) {
    return {
      label: "" + it + (suffix || ''),
      value: it
    };
  });
}

exports.rangeOptions = rangeOptions;

function rangeMonthOptions(start, end, suffix) {
  start = dayjs_1.default(start);
  end = dayjs_1.default(end);
  var endOfMonth = end.endOf('month');
  var startOfMonth = start.startOf('month');
  var ret = rangeOptions(1, 12, suffix);

  if (!end.subtract(1, 'year').isAfter(start)) {
    ret = [];

    do {
      var m = +dayjs_1.default(startOfMonth).format('M');
      ret.push({
        label: "" + m + (suffix || ''),
        value: m
      });
      startOfMonth = dayjs_1.default(startOfMonth).add(1, 'month');
    } while (startOfMonth.isBefore(endOfMonth) && ret.length < 12);
  }

  return ret;
}

exports.rangeMonthOptions = rangeMonthOptions;

function resetMonth(d) {
  d.setDate(1);
  d.setMonth(0);
}

exports.resetMonth = resetMonth;

function resetTime(d) {
  d.setHours(0);
  d.setMinutes(0);
  d.setSeconds(0);
  d.setMilliseconds(0);
}

exports.resetTime = resetTime;