"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getVideoContext = exports.getWXVideoContext = exports.convertStyle = void 0;

var utils_1 = require("../utils");

function toCamelCase(name) {
  return name.replace(/-(\w)/g, function (all, letter) {
    return letter.toUpperCase();
  });
}

function convertStyle(styleStr) {
  if (!styleStr) {
    return null;
  }

  var ret = {};
  var attrs = styleStr.split(';');

  for (var i = 0; i < attrs.length; i++) {
    var entry = attrs[i].split(':');
    ret[toCamelCase(entry.splice(0, 1)[0])] = entry.join(':');
  }

  return ret;
}

exports.convertStyle = convertStyle;

function getWXVideoContext(id) {
  if (typeof wx !== 'undefined') {
    var _internal = void 0;

    if (document && document.getElementById && document.getElementById(id)) {
      _internal = document.getElementById(id)._internal;
    }

    return wx.createVideoContext(id, _internal);
  }

  return null;
}

exports.getWXVideoContext = getWXVideoContext;

function getVideoContext(id) {
  var node = null;

  if (utils_1.isStrictMiniApp && typeof my !== 'undefined') {
    node = my.createVideoContext(id);
  } else if (utils_1.isStrictByteDanceMicroApp && typeof tt !== 'undefined') {
    node = tt.createVideoContext(id);
  } else if (utils_1.isStrictWechatMiniProgram) {
    node = getWXVideoContext(id);
  }

  return node;
}

exports.getVideoContext = getVideoContext;