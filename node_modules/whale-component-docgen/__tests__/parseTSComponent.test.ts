import * as path from 'path';
import { parseTSComponent } from '../src/index';
import { WmParserOptions } from 'whale-docgen-ts';

const resolveComponent = (...args: string[]) =>
  path.resolve(__dirname, 'react', 'components', ...args);

describe('parseTSComponent', () => {
  it('parseTSComponent propFilter', () => {
    const typeFilter: WmParserOptions['typeFilter'] = (prop) => {
      const fileName = prop?.parent?.fileName;
      if (!fileName) {
        return true;
      }
      return !['@types/react', '@types/rax'].some((vo) =>
        fileName.includes(vo)
      );
    };
    const content = parseTSComponent(
      resolveComponent('SelectFCExtendsDiv', 'index.tsx'),
      {
        propFilter: typeFilter,
        typeFilter,
      }
    );
    expect(content).toMatchSnapshot();
  });
});
