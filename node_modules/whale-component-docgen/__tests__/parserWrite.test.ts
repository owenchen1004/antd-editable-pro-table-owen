import * as path from 'path';
import * as fs from 'fs-extra';
import { whaleParse } from '../src/index';
import * as docgen from 'react-docgen-typescript';

const resolve = (...args: string[]) =>
  path.resolve(__dirname, 'react', 'components', ...args);
describe('parserWrite', () => {
  ['SelectFCWithOptions', 'Chart', 'SimpleChart'].forEach((vo) => {
    it(`write ${vo}`, () => {
      const doc = whaleParse(resolve(vo, 'index.tsx'), {
        ingoreFileNames: ['@types/react', '@types/rax', 'typescript/lib'],
      });
      fs.writeJSONSync(resolve(vo, 'doc.json'), doc, {
        spaces: 2,
      });

      const doc2 = docgen.parse(resolve(vo, 'index.tsx'));
      fs.writeJSONSync(resolve(vo, 'componentDoc.json'), doc2, {
        spaces: 2,
      });
      expect(true).toBe(true);
    });
  });
});
