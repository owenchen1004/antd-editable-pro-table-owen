import * as remark from 'remark';
import {
  tnpmVersionBadge,
  tnpmDownloadsBadge,
  gitlabEnhancementIssueBadge,
  gitlabBugIssueBadge,
} from './renderBadges';
import { Node } from 'unist';

const toString = (node: Node) => remark().stringify(node);
describe('renderBadges', () => {
  it('tnpmVersionBadge', () => {
    expect(toString(tnpmVersionBadge('whale-component-docgen'))).toBe(
      '[![TNPM version](https://npm.alibaba-inc.com/badge/v/whale-component-docgen.svg)](https://npm.alibaba-inc.com/package/whale-component-docgen)'
    );
    expect(
      toString(tnpmVersionBadge('whale-component-docgen', '1.0.0'))
    ).toBe(
      '[![TNPM version](https://badgen.net/badge/tnpm/v1.0.0)](https://npm.alibaba-inc.com/package/whale-component-docgen)'
    );
  });
  it('tnpmDownloadsBadge', () => {
    expect(toString(tnpmDownloadsBadge('whale-component-docgen'))).toBe(
      '[![TNPM downloads](https://npm.alibaba-inc.com/badge/d/whale-component-docgen.svg)](https://npm.alibaba-inc.com/package/whale-component-docgen)'
    );
  });
  it('gitlabEnhancementIssueBadge', () => {
    expect(
      toString(gitlabEnhancementIssueBadge('whale-component-docgen'))
    ).toBe(
      '[![提需求](https://badgen.net/badge/icon/%E6%8F%90%E9%9C%80%E6%B1%82?icon=gitlab&label&color=cyan)](whale-component-docgen "提需求")'
    );
  });
  it('gitlabBugIssueBadge', () => {
    expect(toString(gitlabBugIssueBadge('whale-component-docgen'))).toBe(
      '[![提Bug](https://badgen.net/badge/icon/%E6%8F%90Bug?icon=gitlab&label&color=red)](whale-component-docgen "提Bug")'
    );
  });
});
