"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.aliMaterialRenderer = exports.renderComponentDocs = void 0;
const whale_docgen_ts_1 = require("whale-docgen-ts");
const react_docgen_typescript_markdown_render_1 = require("react-docgen-typescript-markdown-render");
const mdast_builder_1 = require("mdast-builder");
// import * as y18n from 'y18n';
// import * as path from 'path';
const renderComponentDocs = (docs) => react_docgen_typescript_markdown_render_1.componentDocsMdastBuilder(docs, exports.aliMaterialRenderer, {
    language: 'zh_CN',
});
exports.renderComponentDocs = renderComponentDocs;
/**
 * alibaba materials style renderer
 * @see https://yuque.antfin-inc.com/mo/spec/spec-materials#CZiWi
 * @example
 * ``` md
 * ### Column
 *
 * Form column.
 *
 * | Param              | Description              | Type                                | Enum                            | Default |
 * | ------------------ | ------------------------ | ----------------------------------- | ------------------------------- | ------- |
 * | prop1              | prop1 description        | string                              |                                 | "red"   |
 * | prop2 _(required)_ | prop2 description        | number                              |                                 |         |
 * | prop3 _(required)_ | prop3 description a \| b | () => void                          |                                 |         |
 * | prop4 _(required)_ | prop4 description 中文   | "option1" \| "option2" \| "option3" | "option1", "option2", "option3" |         |
 * ```
 */
const aliMaterialRenderer = (componentDoc
// { language }
) => {
    // console.log('language', language);
    const __ = (name) => name;
    // const { __ } = y18n({
    //   locale: language || 'en_US',
    //   directory: path.resolve(
    //     __dirname,
    //     '..',
    //     '..',
    //     'locales',
    //     'aliMaterialRenderer'
    //   ),
    // });
    return [
        mdast_builder_1.heading(3, mdast_builder_1.text(componentDoc.displayName)),
        mdast_builder_1.text(componentDoc.description),
        react_docgen_typescript_markdown_render_1.tableMdastBuilder(Object.values(componentDoc.props), [
            {
                title: __('属性'),
                render: (vo) => mdast_builder_1.text(vo.name),
            },
            {
                title: __('描述'),
                render: (vo) => [
                    mdast_builder_1.text(vo.description),
                    ...(whale_docgen_ts_1.isWmUnionPropItemType(vo.type)
                        ? [
                            mdast_builder_1.html('<br/>'),
                            mdast_builder_1.html('<br/>'),
                            mdast_builder_1.strong(mdast_builder_1.text('可选值')),
                            mdast_builder_1.html('<br/>'),
                            mdast_builder_1.text(vo.type.value.map((e) => e.raw).join(', ')),
                        ]
                        : []),
                ],
            },
            {
                title: __('必填'),
                render: (vo) => (vo.required ? '✅' : ''),
            },
            {
                title: __('类型'),
                render: (vo) => mdast_builder_1.inlineCode(whale_docgen_ts_1.isWmUnionPropItemType(vo.type)
                    ? 'Enum'
                    : (vo.type.raw || '').replace(/\|/g, '&#124;')),
            },
            {
                title: __('默认值'),
                render: (vo) => { var _a; return (_a = vo.defaultValue) === null || _a === void 0 ? void 0 : _a.value; },
            },
        ]),
    ];
};
exports.aliMaterialRenderer = aliMaterialRenderer;
//# sourceMappingURL=renderComponentDoc.js.map